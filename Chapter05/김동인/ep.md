# Overview

- 코드를 까봤을 때 독자들이 코드가 깔끔하고 일관적이며 꼼꼼하다고 감탄했으면 좋겠다.
- 개발자라면 형식을 깔끔하게 맞춰 코드를 짜야 한다.
- 코드 형식을 맞추기 위해 간단한 규칙을 정하고 그 규칙을 착실히 따라야 한다.
- 필요하다면 규칙을 자동으로 적용하는 도구를 활용한다.

# 형식을 맞추는 목적

- 코드 형식은 너무 중요하다.
- ‘돌아가는 코드’가 전문 개발자의 일차적인 의무라고 생각할 수 있다.
    - 오늘 구현한 기능이 다음 버전에서 바뀔 확률이 높다.
    - 오늘 구현한 코드의 가독성은 앞으로 바뀔 코드의 품질에 대한 지대한 영향을 미친다.
    - 맨 처음 잡아놓은 구현 스타일과 가독성 수준은 유지보수 용이성과 확장성에 영향을 미친다.
    - 원래 코드는 사라질지라도 개발자의 스타일과 규율은 사라지지 않는다.
- 원활한 소통을 장려하는 코드 형식은 무엇일까?

# 적절한 행 길이를 유지하라

- 자바에서 파일 크기는 클래스 크기와 밀접하다.

![image](https://user-images.githubusercontent.com/66561524/195967997-51d83827-961f-40cb-a1b6-44d5f9c5caaf.png)

- 대ㄷ부분 200줄 정도로도 커다란 시스템을 구축할 수 있다.
- 일반적으로 큰 파일보다 작은 파일이 이해하기 쉽다.

### 신문 기사처럼 작성하라

- 기사는 최상단에 기사를 몇 마디로 요약하는 표제가 나온다.
    - 첫 문단은 전체 기사 내용을 요역한다.
    - 세사한 사실은 숨기고 커다란 그림을 보여준다.
    - 읽어가면서 세세한 사실이 드러난다.
- 함수의 이름은 간단하면서도 설명이 가능하게 짓는다.
    - 고차원 개념과 알고리즘을 설명한다.
    - 아래로 내려갈수록 의도를 세세하게 묘사한다.
    - 마지막에는 가장 저차원 함수와 세부내역이 나온다.

### 개념은 빈 행으로 분리하라

- 각 행은 수식이나 절을 나타내고 일련의 행 묶음은 완결된 생각 하나를 표현한다.
- 생각 사이는 빈 행을 넣어 분리해야 마땅하다.

### 세로 밀집도

- 줄바꿈이 개념을 분리한다면 세로 밀집도는 연관성을 의미한다.
- 서로 밀접한 코드 행은 세로로 가까이 놓여야 한다.

### 수직 거리

- 함수 연관 관계와 동작 방식을 이해하려고 이 함수에서 저 함수로 오가며 소스 파일을 위아래로 뒤지다가 미로 같은 코드 때문에 혼란스러울 수 있다.
- 함수나 변수가 정의된 코드를 찾으려 상속 관계를 줄줄이 거슬러 올라가는 경우 혼란스러울 수 있다.
- 시스템이 무엇을 하는지 이해하고 싶은데 이 조각 저 조각이 어디에 있는지 찾고 기억하느라 시간과 노력을 소모하게 된다.

- 서로 밀접한 개념은 세로로 가까이 둬야 한다.
- 타당한 근거가 없다면 서로 밀접한 개념은 한 파일에 속해야 마땅하다.
    - `protected` 변수를 피해야 한다.
- 같은 파일에 속할 정도로 밀접한 두 개념은 세로 거리로 연관성을 표현한다.

**변수선언**

- **변수는 사용하는 위치에 최대한 가까이 선언한다.**

**인스턴스 변수**

- **인스턴스 변수는 클래스 맨 처음에 선언한다.**
    - 변수간에 세로로 거리를 두지 않는다.
- 인스턴스 변수를 선언하는 위치는 아직도 논쟁이 분분하다.
    - c++에서는 모든 인스턴스 변수를 클래스 마지막에 선언한다는 소위 **가위 규칙(scissors rule)**을 적용한다.
    - 자바에서는 보통 클래스 맨 처음에 인스턴스 변수를 선언한다.

**종속 함수**

- 한 함수가 다른 함수를 호출한다면 두 함수는 세로로 가까이 배치한다.
- 가능하다면 호출하는 함수를 호출되는 함수보다 먼저 배치한다.
    - 첫째 함수에서 가장 먼저 호출하는 함수가 바로 아래 정의한다.

**개념적 유사성**

- 어떤 코드는 서로 끌어당긴다. 개념적 친화도가 높기 때문이다. 친화도가 높을수록 코드를 가까이 배치한다.
- 한 함수가 다른 함수를 호출해서 생기는 직접적인 종속성도 한 예다.
- 비슷한 동작을 수행하는 일군의 함수도 같은 예다.
- 명명법이 똑같고 기본 기능이 유사하는 것이 개념적 유사성이다. 서로가 서로를 호출하는 관계는 부차적인 요인이다. 종속적인 관계가 없더라도 가까이 배치할 함수들이다.

### 세로 순서

- 일반적으로 함수 호출 종속성은 아래 방향으로 유지한다. 호출되는 함수를 호출하는 함수보다 나중에 배치한다.
    - 그러면 소스 코드 모듈이 고차원에서 저차원으로 자연스럽게 내려간다.

### 가로 형식 맞추기

![image](https://user-images.githubusercontent.com/66561524/195968003-af6ff782-b508-45fd-b433-9033b03bdd36.png)

- 프로젝트 7개에서 분석한 내용이다. 그래프는 로그 스케일이다.
- 80자 이후부터 행수는 급격하게 감소한다. 프로그래머는 명백하게 짧은 행을 선호한다.
- 홀러리스는 80자 제한을 내세웠지만 100자나 120자에 달해도 된다.

### 가로 공백 밀집도

```java
private void measureLine(String line) {
	lineCount++;
	int lineSize = line.length();
	totalChars += lineSize;
	lineWidthHistogram.addLine(lineSize, lineCount);
	recordWidestLine(lineSize);
}
```

- 공백을 사용해 밀접한 개념과 느슨한 개념을 포함한다.
    - 공백을 사용하면 두 가지 주요 요소가 확실히 나뉜다는 사실이 분명해진다.
- 함수 이름과 괄호사이에는 공백을 넣지 않는다.
    - 함수와 인수는 서로 밀접하기 때문이다.

### 들여쓰기

- 소스 파일은 윤곽도(outline)와 계층이 비슷하다.
    - 클래스 내 각 메서드에 적용되는 정보가 있고 블록 내 블록에 재귀적으로 적용되는 정보가 있다.
    - 계층에서 각 수준은 이름을 선언하는 범위이자 선언문과 실행문을 해석하는 범위이다.
- 범위(scope)로 이뤄진 계층을 표현하기 위해 코드를 들여쓴다.
- 프로그래머는 이런 들여쓰기 체계에 크게 의존한다.
    - 왼쪽으로 코드를 맞춰 코드가 속하는 범위를 시각적으로 표현한다.
    - 범위를 벗어나서 이동하기 쉬워진다.
    - 들여쓰기가 없으면 인간이 코드를 읽는건 거의 불가능하다.
    

**들여쓰기 무시하기**

- 간단한 if 문, 짧은 while 문, 짧은 함수에서 들여쓰기 규칙을 무시하고픈 유혹이 생긴다.

# 팀 규칙

- 팀 규칙이라는 제목은 말 장난이다.
    - 팀은 한 가지 규칙에 합의해야 한다.
    - 규칙은 IDE 코드 형식기를 설정해야 한다.
- 한 소스 파일에서 봤던 형식이 다른 소스 파일에도 쓰이리라는 신뢰감을 독자에게 줘야 한다.
- 온갖 스타일을 뒤섞어 소스 코드를 필요 이상으로 복잡하게 만드는 실수는 피한다.

